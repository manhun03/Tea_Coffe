<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      lang="en">
<head>
    <meta charset="UTF-8" http-equiv="refresh" content="15">
    <title>Table Page</title>
    <link rel="stylesheet" th:href="@{/staff_assets/layuiadmin/layui/css/layui.css}" href="../../static/staff_assets/layui/css/layui.css"
          media="all"/>
    <link rel="stylesheet" th:href="@{/client_assets/css/font-icons.css}">
    <!-- plugins css -->
    <link rel="stylesheet" th:href="@{/client_assets/css/plugins.css}">
    <!-- Main Stylesheet -->
    <link rel="stylesheet" th:href="@{/client_assets/css/style.css}">
    <!-- Responsive css -->
    <link rel="stylesheet" th:href="@{/client_assets/css/responsive.css}">
    <!-- ToaStr   -->
    <link rel="stylesheet" th:href="@{/client_assets/css/toastr.css}">
    <!-- Icons Css -->
    <link th:href="@{/assets/css/icons.min.css}" rel="stylesheet" type="text/css"/>
    <style>
        * {
            margin: 0px
        }

        body {
            font-family:"";
        }

        .nav {
            font-size: 20px;
            line-height: 30px;
            text-align: center;
            background: #393D49;
            color: #ffffff;
            padding: 20px 0px;
        }

        .statue {
            font-size: 18px;
            position: relative;
            left: -42px;
            top: 46px;
        }

        .people {
            font-size: 14px;
            position: relative;
            left: 40px;
            top: 117px;
        }

        .desk_code {
            font-size: 48px;
            position: relative;
            top: 10px;
        }

        .color1 {
            color: #0C0C0C;
            background: #F8F8F8;
        }

        .color2 {
            color: #FFFFFF;
            background: #65cc33;
        }
        .color3 {
            color: #FFFFFF;
            background: #FF5722;
        }
        .con {
            overflow: hidden
        }

        .c_con {
            overflow: hidden;
            width: 1200px;
            position: relative;
            left: 50%;
            margin-left: -600px;
            text-align: center;
        }

        .desk {
            float: left;
            width: 140px;
            height: 140px;
            border-radius: 4%;
            margin: 15px 50px;
            overflow: hidden;
        }
        .footer {
            position: absolute;
            bottom: 0;
            width: 100%;
            text-align: center;
        }
        .title{
        text-align: center;
        margin-left:700px;
        }
        .con{
         background-color: #934304;
         }
         .site-logo{
         width:80px;
         height:80px;
         }
           .text-logo{
            margin-top:16px;
            font-size:24px;
            color:#80B500;
        }


    </style>
</head>
<body class="layui-layout-body">
<div class="ltn__header-middle-area ltn__header-sticky ltn__sticky-bg-white ltn__logo-right-menu-option sticky-active-into-mobile--- plr--9---">
    <div class="container">
        <div class="row">
            <div class="col">
                <div class="site-logo-wrap">
                    <div class="site-logo">
                        <a href="/"><img th:src="@{/client_assets/img/logo1.png}" alt="Logo">
                          <span class="text-logo">Chill&Free Coffee</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col header-menu-column menu-color-white---">
                <div class="header-menu d-none d-xl-block">
                    <nav>
                        <div class="ltn__main-menu">
                            <ul>
                                <li><a th:href="@{/}">Home</a></li>
                                <li><a href="/about">About</a></li>
                                <li><a href="/product">Shop</a></li>
                                <li><a href="/contact">Contact</a></li>
                                <li sec:authorize="hasAnyAuthority('ADMIN')"><a th:href="@{/admin}">Admin</a>
                                </li>
                                <li sec:authorize="hasAnyAuthority('STAFF')"><a th:href="@{/staff/table/desklist}">Staff</a>
                                </li>
                                <li sec:authorize="isAuthenticated()"><a style="color:#80B500;">Hello, <span
                                        th:text="${#authentication.principal.getFullName()}"></span></a></li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
            <div class="ltn__header-options ltn__header-options-2">
                <!-- header-search-1 -->
                <div class="header-search-wrap">
                    <div onclick="removeList()" class="header-search-1">
                        <div class="search-icon">
                            <i class="icon-search for-search-show"></i>
                            <i class="icon-cancel  for-search-close"></i>
                        </div>
                    </div>
                    <div class="header-search-1-form">
                        <form th:action="@{/search/product}" method="post">
                            <input required type="text" id="keyword" name="keyword" placeholder="Search here..."/>
                            <button type="submit">
                                <span><i class="icon-search"></i></span>
                            </button>
                        </form>
                    </div>
                    <div id="search-frame">

                    </div>
                    <!--                            <div style="top: 311%; height: 400px; background-color: unset; box-shadow: none;" class="header-search-1-form">-->
                    <!--                                <ul id="product-list-search" style="background-color: #fff; padding: 0;">-->

                    <!--                                </ul>-->
                    <!--                            </div>-->
                </div>
                <!-- user-menu -->
                <div class="ltn__drop-menu user-menu">
                    <ul>
                        <li>
                            <a href="#"><i class="icon-user"></i></a>
                            <ul>
                                <li sec:authorize="!isAuthenticated()"><a href="/login">Login</a></li>
                                <li sec:authorize="isAuthenticated()">
                                    <form th:action="@{/logout}" method="post">
                                        <button type="submit" style="all: unset; cursor: pointer">
                                            <a>Logout</a>
                                        </button>
                                    </form>
                                </li>
                                <li sec:authorize="!isAuthenticated()"><a href="/register">Register</a></li>
                                <li sec:authorize="isAuthenticated()"><a href="/account">My Account</a></li>
                                <li><a href="/wishlist">Wishlist</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <!-- mini-cart -->
                <!--                        th:text="${session.totalItems == null} ? '0': ${session.totalItems}"-->
                <div class="mini-cart-icon">
                    <a href="#ltn__utilize-cart-menu" class="ltn__utilize-toggle">
                        <i class="icon-shopping-cart"></i>
                        <sup id="total_items"></sup>
                    </a>
                </div>
                <!-- mini-cart -->
                <!-- Mobile Menu Button -->
                <div class="mobile-menu-toggle d-xl-none">
                    <a href="#ltn__utilize-mobile-menu" class="ltn__utilize-toggle">
                        <svg viewBox="0 0 800 600">
                            <path d="M300,220 C300,220 520,220 540,220 C740,220 640,540 520,420 C440,340 300,200 300,200"
                                  id="top"></path>
                            <path d="M300,320 L540,320" id="middle"></path>
                            <path d="M300,210 C300,210 520,210 540,210 C740,210 640,530 520,410 C440,330 300,190 300,190"
                                  id="bottom"
                                  transform="translate(480, 320) scale(1, -1) translate(-480, -318) "></path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="layui-card nav">
    <div class="title">

        Please choose the table
    </div>
</div>

<div class="con">
    <div class="c_con" id="c_con">
        <th:block th:each="tableBooking : ${tables}">
            <th:block th:if="${tableBooking.status == 0}">
                <div class="desk color1 click" style="text-align:center;">
                    <input type="hidden" name="deskId" th:value="${tableBooking.tableId}">
                    <div class="people"><span th:text="${tableBooking.peopleCount}"></span><span> People</span></div>
                    <div class="desk_code" th:text="${tableBooking.tableCode}"></div>
                    <div class="statue">
                        <input type="hidden" th:value="${tableBooking.status}">
                        --Available
                    </div>
                </div>
            </th:block>
            <th:block th:if="${tableBooking.status == 1}">
                <div class="desk color2 click" style="text-align:center;">
                    <input type="hidden" name="deskId" th:value="${tableBooking.tableId}">
                    <div class="people"><span th:text="${tableBooking.peopleCount}"></span><span> People</span></div>
                    <div class="desk_code" th:text="${tableBooking.tableCode}"></div>
                    <div class="statue">
                        <input type="hidden" th:value="${tableBooking.status}">
                        Dining
                    </div>
                </div>
            </th:block>
            <th:block th:if="${tableBooking.status == 2}">
                <div class="desk color3 click" style="text-align:center;">
                    <input type="hidden" name="deskId" th:value="${tableBooking.tableId}">
                    <div class="people"><span th:text="${tableBooking.peopleCount}"></span><span> People</span></div>
                    <div class="desk_code" th:text="${tableBooking.tableCode}"></div>
                    <div class="statue">
                        <input type="hidden" th:value="${tableBooking.status}">
                        --Cleaning
                    </div>
                </div>
            </th:block>
        </th:block>
    </div>
</div>
<div class="footer">
    <div id="test1"></div>
</div>
</body>
<script th:src="@{/staff_assets/layuiadmin/layui/layui.js}" src="../../static/staff_assets/layuiadmin/layui/layui.js"></script>
<script th:inline="javascript">
    layui.use(['jquery', 'layer', 'laypage'], function(){
        var $ = layui.$,
            layer = layui.layer,
            laypage = layui.laypage;
        var totalNum = [[${totalItems}]];
        var limit = 15;
        var currentPage = [[${currentPage}]];

        $(".click").click(function (){
            var deskState = $(this).find(".statue input").val();
            var deskCode = $(this).find(".desk_code").text();
            if(deskState == 0){
                $.ajax({
                    url:'/staff/table/login',
                    type:'POST',
                    dataType:'json',
                    data:{
                        "deskCode": deskCode
                    },
                    success:function (res) {
                        if(res.code == 200){
                            layer.msg("Login success!");
                            location = "/staff/table/main";
                        } else {
                            layer.msg(res.msg, {icon: 5});
                        }
                    }
                });
            } else {
                layer.msg("NOT AVAILABLE!", {icon: 5});
            }
        });

        laypage.render({
            elem: 'test1',
            count: totalNum,
            limit: limit,
            curr: currentPage,
            theme: '#393D49',
            jump: function (obj, first){
                if (!first) {
                    location = "/staff/table/desklist?pageNum=" + obj.curr;
                   // location.href = '/staff/table/desklist/'+obj.curr;
                }
            }
        });
    });
</script>
</html>
